{{ define "main" }}

<div class="page-header">
    <h1>{{ .Title }}</h1>
    {{- if .Content }}
        <div class="page-content">{{ .Content }}</div>
    {{- end }}
</div>

{{/* --- Öne Çıkan Yazılar --- */}}
{{ $featuredPages := where .Site.RegularPages "Params.featured" true }}
{{ if $featuredPages }}
<div class="featured-posts">
    <h2>Öne Çıkan Yazılar</h2>
    <div class="post-grid">
        {{ range first 2 $featuredPages }}
            {{ .Render "summary-card" }}
        {{ end }}
    </div>
</div>
<hr class="custom-hr">
{{ end }}


{{/* --- Diğer Tüm Yazılar --- */}}
<h2>Tüm Yazılar</h2>
{{ $regularPages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
{{ $paginator := .Paginate $regularPages 6 }}
<div class="post-grid">
    {{ range $paginator.Pages }}
        {{ .Render "summary-card" }}
    {{ end }}
</div>

{{- partial "pagination.html" . -}}

{{ end }}


{{/* --- Tekrar Kullanılabilir Yazı Kartı Şablonu --- */}}
{{ define "summary-card" }}
<article class="post-entry">
    {{- $cover := .Params.cover }}
    {{- if $cover }}
        {{- if $cover.image }}
        <a class="entry-cover" href="{{ .Permalink }}">
            <img src="{{ $cover.image | absURL }}" alt="{{ $cover.alt | default .Title }}" loading="lazy">
        </a>
        {{- end }}
    {{- end }}
    <header class="entry-header">
        <h2>
            <a href="{{ .Permalink }}" rel="bookmark">{{ .Title }}</a>
        </h2>
    </header>
    <footer class="entry-footer">
        {{ .Date.Format "January 2, 2006" }} · {{ .ReadingTime }} min
    </footer>
</article>
{{ end }}


{{/* --- Sayfa Stilleri --- */}}
{{ define "css" }}
<style>
.post-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 25px;
}
.post-entry .entry-cover img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 8px;
}
.post-entry {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    overflow: hidden;
    transition: box-shadow 0.3s;
}
.post-entry:hover {
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.post-entry .entry-header, .post-entry .entry-footer {
    padding: 0 15px;
}
.post-entry .entry-header {
    padding-top: 15px;
}
.post-entry .entry-footer {
    padding-bottom: 15px;
    font-size: 0.8em;
    color: #757575;
}
.custom-hr {
    margin: 40px 0;
}
@media (max-width: 768px) {
    .post-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{{ end }}