{{ define "main" }}
<div class="homepage-content">

    {{/* --- BÖLÜM 1: EN ÇOK OKUNANLAR --- */}}
    {{ $featured_pages := where .Site.RegularPages "Params.featured" true }}
    {{ if $featured_pages }}
        <h2 class="homepage-section-title">En Çok Okunanlar</h2>
        <div class="featured-posts-grid">
            {{ range $featured_pages }}
                {{ .Render "summary-card-featured" }}
            {{ end }}
        </div>
        <hr class="section-divider">
    {{ end }}

    {{/* --- KATEGORİ BÖLÜMLERİ --- */}}
    {{ $kategoriler := slice 
        "Başlangıç Rehberi"
        "Para Kazanma"
        "Teknik İpuçları"
        "Tasarım"
        "Beceri Geliştirme ve İleri Teknikler"
        "Yazıcı İncelemeleri"
        "Teknoloji Karşılaştırma"
        "Temel Bilgi ve Kurulum"
        "Girişimcilik"
        "İleri Seviye"
        "Kaynaklar"
    }}

    {{ range $kategoriler }}
        {{ $kategoriAdi := . }}
        {{ $sayfaListesi := where $.Site.RegularPages "Params.categories" "intersect" (slice $kategoriAdi) }}
        {{ if $sayfaListesi }}
            <div class="category-section-wrapper">
                <h2 class="homepage-section-title">
                    <a href="{{ (printf "categories/%s" ($kategoriAdi | urlize)) | absURL }}">{{ $kategoriAdi }}</a>
                </h2>
                <div class="all-posts-grid">
                    {{ range first 3 $sayfaListesi }}
                        {{ .Render "summary-card-compact" }}
                    {{ end }}
                </div>
            </div>
        {{ end }}
    {{ end }}

</div>
{{ end }}